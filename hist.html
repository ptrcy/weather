<!DOCTYPE html>
<html class="light" lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>SkyCast - Historical Weather</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23f59e0b'><circle cx='12' cy='12' r='5'/><path d='M12 1v3M12 20v3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M1 12h3M20 12h3M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12' stroke='%23f59e0b' stroke-width='2' stroke-linecap='round'/></svg>">
  <style>body { opacity: 0; } body.loaded { opacity: 1; transition: opacity 0.1s; }</style>

  <!-- Preconnect to external domains for faster loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />

  <!-- Critical CSS first -->
  <link href="dist/output.css" rel="stylesheet" />

  <!-- Fonts with optimized loading - non-blocking -->
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@400,0..1&display=swap" rel="stylesheet" media="print" onload="this.media='all'" />

  <!-- Defer Chart.js - not needed for initial render -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>

  <script>document.addEventListener('DOMContentLoaded', () => document.body.classList.add('loaded'));</script>
</head>

<body
  class="bg-background-light dark:bg-background-dark font-display text-[#111418] dark:text-white transition-colors duration-200">
  <div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">
    <div class="layout-container flex h-full grow flex-col">
      <!-- Top Navigation Bar -->
      <header
        class="flex items-center justify-between border-b border-solid border-[#dbe0e6] dark:border-gray-800 bg-white dark:bg-background-dark px-4 md:px-10 py-3 sticky top-0 z-50 gap-4">
        <div class="flex items-center gap-2 md:gap-4 text-primary flex-shrink-0">
          <a href="index.html" class="flex items-center gap-2 md:gap-4 text-primary hover:opacity-80 transition-opacity">
            <span class="material-symbols-outlined text-2xl md:text-3xl">wb_sunny</span>
            <h2 class="text-[#111418] dark:text-white text-lg md:text-xl font-bold leading-tight tracking-[-0.015em]">
              SkyCast
            </h2>
          </a>
        </div>

        <form id="addCityForm" class="flex flex-col flex-1 max-w-xs md:max-w-sm h-10 relative">
          <div class="flex w-full flex-1 items-stretch rounded-lg h-full overflow-hidden">
            <div
              class="text-[#617589] dark:text-gray-400 flex border-none bg-background-light dark:bg-gray-800 items-center justify-center pl-3 md:pl-4">
              <span class="material-symbols-outlined text-xl">search</span>
            </div>
            <input id="cityInput"
              class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden text-[#111418] dark:text-white focus:outline-0 focus:ring-0 border-none bg-background-light dark:bg-gray-800 placeholder:text-[#617589] dark:placeholder:text-gray-500 px-2 md:px-4 text-sm md:text-base font-normal leading-normal"
              placeholder="Search cities..." value="" autocomplete="off" />
          </div>
          <!-- Search Results Dropdown -->
          <div id="searchResults"
            class="absolute top-12 left-0 w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg z-50 overflow-hidden flex flex-col gap-1">
          </div>
        </form>

        <!-- Desktop nav - hidden on mobile -->
        <div class="hidden lg:flex items-center gap-6">
          <a class="text-[#111418] dark:text-white text-sm font-medium leading-normal hover:text-primary transition-colors"
            href="index.html">Forecast</a>
          <a class="text-primary text-sm font-medium leading-normal" href="hist.html">Historical</a>
        </div>
      </header>
      <main class="flex flex-1 justify-center py-8">
        <div class="layout-content-container flex flex-col w-full max-w-[1200px] flex-1 px-4 md:px-10">
          <!-- Page Heading -->
          <div class="flex flex-col sm:flex-row sm:flex-wrap justify-between items-start sm:items-end gap-4 mb-6">
            <div class="flex flex-col gap-2">
              <p
                class="text-[#111418] dark:text-white text-2xl md:text-4xl font-black leading-tight tracking-[-0.033em]">
                Historical Weather
              </p>
              <p class="text-[#617589] dark:text-gray-400 text-sm md:text-base font-normal leading-normal">
                Compare historical weather data across cities
              </p>
            </div>
            <div class="flex gap-2 md:gap-3">
              <button id="refreshAll"
                class="flex cursor-pointer items-center justify-center overflow-hidden rounded-lg h-9 md:h-10 px-3 md:px-4 bg-white dark:bg-gray-800 border border-[#dbe0e6] dark:border-gray-700 text-[#111418] dark:text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-gray-50">
                <span class="material-symbols-outlined text-lg">refresh</span>
                <span class="truncate hidden sm:inline ml-2">Refresh</span>
              </button>
              <button id="clearAll"
                class="flex cursor-pointer items-center justify-center overflow-hidden rounded-lg h-9 md:h-10 px-3 md:px-4 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-primary/90">
                <span class="material-symbols-outlined text-lg">delete_sweep</span>
                <span class="truncate hidden sm:inline ml-2">Clear</span>
              </button>
            </div>
          </div>

          <!-- Date Range Selection -->
          <div class="bg-white dark:bg-gray-800 rounded-xl border border-[#dbe0e6] dark:border-gray-700 shadow-sm p-4 md:p-6 mb-6">
            <h3 class="text-[#111418] dark:text-white text-lg font-bold mb-4 flex items-center gap-2">
              <span class="material-symbols-outlined text-primary">calendar_month</span>
              Date Range
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="flex flex-col gap-2">
                <label for="startDate" class="text-sm font-semibold text-[#617589] dark:text-gray-400 uppercase tracking-wider">
                  Start Date (DD/MM/YYYY)
                </label>
                <input type="date" id="startDate"
                  class="w-full px-4 py-2 rounded-lg border border-[#dbe0e6] dark:border-gray-700 bg-white dark:bg-gray-900 text-[#111418] dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
              </div>
              <div class="flex flex-col gap-2">
                <label for="numDays" class="text-sm font-semibold text-[#617589] dark:text-gray-400 uppercase tracking-wider">
                  Number of Days
                </label>
                <input type="number" id="numDays" min="1" max="365" value="30"
                  class="w-full px-4 py-2 rounded-lg border border-[#dbe0e6] dark:border-gray-700 bg-white dark:bg-gray-900 text-[#111418] dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                <p class="text-xs text-gray-500">Maximum 365 days</p>
              </div>
            </div>
            <div id="dateRangePreview" class="mt-3 text-sm text-[#617589] dark:text-gray-400">
              <!-- Date range preview will be shown here -->
            </div>
            <button id="fetchHistorical"
              class="mt-4 flex cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-6 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-primary/90 transition-colors">
              <span class="material-symbols-outlined mr-2">history</span>
              Fetch Historical Data
            </button>
          </div>

          <!-- Selected Cities -->
          <div id="selectedCities" class="flex flex-wrap gap-2 mb-6">
            <!-- City tags will be injected here -->
          </div>

          <!-- Chart Section -->
          <div class="mt-6 md:mt-8 mb-8">
            <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-3">
              <h2
                class="text-[#111418] dark:text-white text-lg md:text-[22px] font-bold leading-tight tracking-[-0.015em]">
                Historical Trends</h2>
              <div id="chartToggle" class="flex bg-[#f0f2f4] dark:bg-gray-800 p-1 rounded-lg">
                <button data-mode="max"
                  class="px-2 md:px-4 py-1.5 rounded-md text-xs md:text-sm font-bold bg-white dark:bg-gray-700 text-[#111418] dark:text-white shadow-sm transition-all">Max</button>
                <button data-mode="min"
                  class="px-2 md:px-4 py-1.5 rounded-md text-xs md:text-sm font-bold text-[#617589] dark:text-gray-400 hover:text-[#111418] dark:hover:text-white transition-all">Min</button>
                <button data-mode="rain"
                  class="px-2 md:px-4 py-1.5 rounded-md text-xs md:text-sm font-bold text-[#617589] dark:text-gray-400 hover:text-[#111418] dark:hover:text-white transition-all">Rain</button>
                <button data-mode="wind"
                  class="px-2 md:px-4 py-1.5 rounded-md text-xs md:text-sm font-bold text-[#617589] dark:text-gray-400 hover:text-[#111418] dark:hover:text-white transition-all">Wind</button>
              </div>
            </div>
            <div class="p-4 rounded-xl border border-[#dbe0e6] dark:border-gray-700 bg-white dark:bg-gray-800 shadow-sm canvas-container">
              <canvas id="weatherChart" class="w-full max-h-[400px]"></canvas>
            </div>
          </div>

          <!-- Detailed Metrics Section -->
          <div class="mt-12">
            <h2 class="text-[#111418] dark:text-white text-[22px] font-bold leading-tight tracking-[-0.015em] mb-4">
              Detailed Analytics
            </h2>
            <div id="detailedAnalytics" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
              <!-- Cards are dynamically generated by hist.js -->
            </div>
          </div>
        </div>
      </main>
      <footer
        class="border-t border-[#dbe0e6] dark:border-gray-800 py-6 md:py-10 px-4 md:px-10 bg-white dark:bg-background-dark">
        <div class="max-w-[1200px] mx-auto flex flex-col items-center gap-4 text-center">
          <div class="flex items-center gap-2 text-primary opacity-60">
            <span class="material-symbols-outlined">wb_sunny</span>
            <span class="font-bold text-lg">SkyCast</span>
          </div>
          <p class="text-xs md:text-sm text-[#617589] dark:text-gray-400">
            Â© 2024 SkyCast Weather Analytics
          </p>
          <div class="flex flex-wrap justify-center gap-4 md:gap-6">
            <a class="text-xs md:text-sm text-[#617589] dark:text-gray-400 hover:text-primary" href="#">Privacy</a>
            <a class="text-xs md:text-sm text-[#617589] dark:text-gray-400 hover:text-primary" href="#">Terms</a>
            <a class="text-xs md:text-sm text-[#617589] dark:text-gray-400 hover:text-primary" href="#">API</a>
          </div>
        </div>
      </footer>
    </div>
  </div>
  <script src="hist.js"></script>
</body>

</html>
